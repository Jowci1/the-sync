<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>THE SYNC | Jowci</title>
    
    <meta property="fc:frame" content='{"version":"next","imageUrl":"https://your-vercel-link.vercel.app/icon.png","button":{"title":"Play THE SYNC","action":{"type":"launch_frame","name":"THE SYNC","url":"https://your-vercel-link.vercel.app/","splashImageUrl":"https://your-vercel-link.vercel.app/icon.png","splashBackgroundColor":"#000000"}}}'>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@farcaster/frame-sdk/dist/bundle.js"></script>
    <style>
        body { background-color: black; color: white; touch-action: manipulation; overflow: hidden; font-family: sans-serif; }
        .target { transition: all 0.08s ease-out; cursor: pointer; }
        .base-glow { shadow-lg shadow-blue-500/50; }
        .fc-glow { shadow-lg shadow-purple-500/50; }
    </style>
</head>
<body class="flex items-center justify-center h-screen w-full">

    <div id="start-screen" class="text-center p-6 flex flex-col items-center">
        <img src="icon.png" class="w-24 h-24 mb-6 rounded-2xl shadow-2xl border border-zinc-800" alt="Logo">
        <h1 class="text-5xl font-black mb-2 tracking-tighter italic text-blue-500">THE SYNC</h1>
        <p class="text-gray-400 mb-8 text-lg font-medium">Capture the Signal. Built by Jowci.</p>
        <button onclick="startGame()" class="bg-white text-black px-12 py-4 rounded-full font-black text-xl active:scale-95 transition mb-6 shadow-[0_0_20px_rgba(255,255,255,0.3)]">ENTER GATE</button>
    </div>

    <div id="game-screen" class="hidden w-full h-full relative">
        <div class="absolute top-12 w-full flex justify-around font-black text-xl z-10 bg-black/40 py-2 backdrop-blur-sm">
            <div class="text-blue-500 uppercase tracking-widest text-sm">Base: <span id="base-score" class="text-2xl ml-1">0</span></div>
            <div id="timer" class="text-white text-4xl">15</div>
            <div class="text-purple-500 uppercase tracking-widest text-sm">FC: <span id="fc-score" class="text-2xl ml-1">0</span></div>
        </div>
        <button id="target" onclick="handleTap()" class="target absolute transform -translate-x-1/2 -translate-y-1/2 w-24 h-24 rounded-full border-4 flex items-center justify-center font-black text-4xl shadow-2xl"></button>
    </div>

    <div id="result-screen" class="hidden text-center p-8 border border-white/10 rounded-3xl bg-zinc-900/80 backdrop-blur-md flex flex-col items-center shadow-2xl">
        <h2 class="text-xl font-bold mb-2 text-gray-400">SYNC COMPLETE</h2>
        <div id="final-score" class="text-8xl font-black mb-2 text-white">0</div>
        <p id="sync-status" class="text-lg mb-8 font-bold italic"></p>
        
        <div class="flex flex-col gap-3 w-full">
            <button onclick="shareScore()" class="bg-blue-600 w-full py-4 rounded-full font-bold text-lg active:scale-95 shadow-lg shadow-blue-900/20">SHARE SIGNAL</button>
            <button onclick="startGame()" class="text-zinc-400 w-full py-2 font-bold hover:text-white transition">RETRY</button>
        </div>
        
        <p class="text-zinc-600 text-[10px] mt-8 font-bold tracking-[0.3em] uppercase">Built by Jowci</p>
    </div>

    <script>
        let basePoints = 0, fcPoints = 0, timeLeft = 15, gameActive = false, currentType = 'base';

        if (window.farcaster && window.farcaster.sdk) { window.farcaster.sdk.actions.ready(); }

        function startGame() {
            basePoints = 0; fcPoints = 0; timeLeft = 15; gameActive = true;
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            updateScores(); spawnTarget();
            
            const timerInterval = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').innerText = timeLeft;
                if (timeLeft <= 0) { clearInterval(timerInterval); endGame(); }
            }, 1000);
        }

        function spawnTarget() {
            currentType = Math.random() > 0.5 ? 'base' : 'fc';
            const targetBtn = document.getElementById('target');
            const isBase = currentType === 'base';
            
            targetBtn.className = `target absolute transform -translate-x-1/2 -translate-y-1/2 w-24 h-24 rounded-full border-4 flex items-center justify-center font-black text-4xl shadow-2xl active:scale-75
                ${isBase ? 'bg-blue-600 border-white shadow-blue-500/50' : 'bg-purple-600 border-white shadow-purple-500/50'}`;
            targetBtn.innerText = isBase ? 'B' : 'F';

            targetBtn.style.top = (Math.random() * 50 + 25) + "%";
            targetBtn.style.left = (Math.random() * 70 + 15) + "%";
        }

        function handleTap() {
            if (!gameActive) return;
            if (currentType === 'base') basePoints++; else fcPoints++;
            updateScores(); spawnTarget();
        }

        function updateScores() {
            document.getElementById('base-score').innerText = basePoints;
            document.getElementById('fc-score').innerText = fcPoints;
        }

        function endGame() {
            gameActive = false;
            document.getElementById('game-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            document.getElementById('final-score').innerText = basePoints + fcPoints;
            const status = (basePoints > 0 && fcPoints > 0) ? "FULLY SYNCED ðŸ”µðŸŸ£" : "PARTIAL SYNC âš ï¸";
            document.getElementById('sync-status').innerText = status;
            document.getElementById('sync-status').className = (basePoints > 0 && fcPoints > 0) ? "text-green-400 font-bold italic" : "text-yellow-500 font-bold italic";
        }

        function shareScore() {
            const text = `I achieved a Sync Score of ${basePoints + fcPoints} on THE SYNC! ðŸ”µðŸŸ£\nBuilt by Jowci`;
            const url = `https://warpcast.com/~/compose?text=${encodeURIComponent(text)}`;
            window.open(url, '_blank');
        }
    </script>
</body>
</html>